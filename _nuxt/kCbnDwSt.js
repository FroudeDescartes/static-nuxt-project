import{aH as ne,bg as w,bh as G,b9 as oe,ba as le,aI as se,aN as ie,d as f,bi as re,c as ce,o as h,w as T,h as e,aU as c,e as n,aG as x,bj as ue,bk as de,b as g,bl as C,bm as L,aF as u,bn as pe}from"./DpCDMTZu.js";import{u as ve,_ as me,a as be}from"./AjfHWejm.js";const he={wrapper:"space-y-8 mt-20",table:{wrapper:"border rounded-xl p-4",title:"text-xl font-bold font-mono",content:{base:"w-full grid grid-cols-2 gap-6 lg:flex lg:flex-row lg:items-center lg:justify-between",padding:"p-4 pl-4 pr-4",title:"text-center font-bold",text:"text-center dark:text-gray-400"}}},fe={class:"truncate whitespace-nowrap"},ge={class:"w-full pl-4 pr-4 border rounded-xl p-4 space-y-8"},_e={class:"w-full flex flex-row items-start p-4 border rounded-xl"},De={class:"w-fit p-4"},ye={class:c("text-left dark:text-gray-400")},Ne={class:"w-1/4 p-4"},xe={class:"w-fit md:w-1/2 p-4"},ke=["innerHTML"],we={class:"text-xl absolute font-bold font-mono p-4"},Ie={class:"relative flex flex-row items-start pt-20 p-8 space-x-10 border rounded-xl"},Fe={class:"w-1/6 flex-shrink-0"},Me={class:"w-1/3 flex-shrink-0"},Ve={class:"flex-1"},Te={class:"text-center dark:text-gray-400 whitespace-pre-line list-outside"},Re=ne({__name:"eh-mrid",props:{ui:{}},setup($){var U,B,H;const z=$,{getMridById:E,getAllMridData:I,setMridData:O}=ve(),R=w("");G(()=>{R.value=sessionStorage.getItem("mridDataUrl")||""});const{ui:s}=oe("eh-card",le(z,"ui"),he),P={container:"max-h-[400px] overflow-y-auto scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-100 dark:scrollbar-thumb-gray-600 dark:scrollbar-track-gray-800"},A=se(),J=ie(),k=f(()=>A.query.mrid_id||"Missing MRID"),{$model_rules_v1_2:K,$readCheckFunctionDescriptions:Q}=re(),q=w(!1),F=w({}),W=async()=>{if(I().length===0&&!q.value){q.value=!0;try{let l;const i=R.value;if(!i||typeof i!="string"||!/^https?:\/\//.test(i)){console.error("Invalid or missing MRID data URL:",i);return}const r=new URL(i.toString()).pathname.split("/"),m=r[1],p=r[2],v=r[4]==="blob"?r[5]:r[4],b=r[4]==="blob"?r.slice(6).join("/"):r.slice(5).join("/");l=await be(m,p,b,v),typeof l=="string"&&(l=JSON.parse(l)),F.value=Q(l);const t=K(l);O(t)}catch(l){throw console.error("Failed to fetch GitHub content:",l),l}}};G(()=>{W()});const a=f(()=>(I(),E(k.value))),M=()=>{const o=I();return!o||o.length===0?[]:o.map(l=>({label:l.id,value:l.id,click:()=>X(l.id)}))},X=o=>{J.push({query:{...A.query,mrid_id:o}})},Y=f(()=>[{columnName:"MRID",label:k.value||"No Data",value:"",icon:"",entityType:[M().length>0?M():[{label:k.value||"No Data",value:k.value||"No Data",click:()=>{}}]]}]),Z=f(()=>{var o,l,i,d,r,m,p,v,b,t,_,D,y,N,j;return[{columnName:"Entity Type",badgeLabel:((o=a.value)==null?void 0:o.entityType)||"No Data",value:"entity1",icon:"",entityType:[[{label:((l=a.value)==null?void 0:l.entityType)||"No Data",value:((i=a.value)==null?void 0:i.entityType)||"No Data"}]]},{columnName:"Function",badgeLabel:((d=a.value)==null?void 0:d.function)||"No Data",value:"function",icon:"",entityType:[[{label:((r=a.value)==null?void 0:r.function)||"No Data",value:((m=a.value)==null?void 0:m.function)||"No Data"}]]},{columnName:"Reference",badgeLabel:((p=a.value)==null?void 0:p.reference)||"No Data",value:"reference",icon:"",entityType:[[{label:((v=a.value)==null?void 0:v.reference)||"No Data",value:((b=a.value)==null?void 0:b.reference)||"No Data"}]]},{columnName:"MR Version Introduced",badgeLabel:((t=a.value)==null?void 0:t.mrVersionIntroduced)||"No Data",value:"mr_version_introduced",icon:"",entityType:[[{label:((_=a.value)==null?void 0:_.mrVersionIntroduced)||"No Data",value:((D=a.value)==null?void 0:D.mrVersionIntroduced)||"No Data"}]]},{columnName:"Type",badgeLabel:((y=a.value)==null?void 0:y.type)||"No Data",value:"type",icon:"",entityType:[[{label:((N=a.value)==null?void 0:N.type)||"No Data",value:((j=a.value)==null?void 0:j.type)||"No Data"}]]}]}),ee=f(()=>{var r,m,p,v;const o=((r=a.value)==null?void 0:r.requirement_checkFunction)||"No Data",l=((m=a.value)==null?void 0:m.condition_checkFunction)||"No Data",i=F.value[o]||"No description available",d=F.value[l]||"No description available";return[{columnName:"Requirement",checkFunction:"Check Function",description:"Description",arguments:"Arguments",value:"requirement",requirements:[{checkFunction:o},{description:i},{reqArguments:(((p=a.value)==null?void 0:p.reqArguments)||"No Data").replace(/<\/?(?:pre|code)>/g,"")}]},{columnName:"Condition",checkFunction:"Check Function",description:"Description",arguments:"Arguments",value:"condition",requirements:[{checkFunction:l},{description:d},{conditionArguments:(((v=a.value)==null?void 0:v.conditionArguments)||"No Data").replace(/<\/?(?:pre|code)>/g,"")}]}]}),V=w(((U=a.value)==null?void 0:U.modelVersionIntroduced)||"Error Loading Version. Please Refresh or Check Data Source"),te=f(()=>{var l,i;if(!V.value)return(l=a.value)==null?void 0:l.modelVersionIntroduced;const o=S[0].find(d=>d.value===V.value);return o?o.label:(i=a.value)==null?void 0:i.modelVersionIntroduced}),ae=o=>{o.value&&(V.value=o.value)},S=[[{label:(B=a.value)==null?void 0:B.modelVersionIntroduced,value:(H=a.value)==null?void 0:H.modelVersionIntroduced,icon:"i-heroicons-check-badge-20-solid",click:()=>{var o;return ae({value:(o=a.value)==null?void 0:o.modelVersionIntroduced})}}]];return(o,l)=>{const i=de,d=ue,r=me,m=pe;return h(),ce(m,null,{default:T(()=>{var p,v,b;return[e("div",{class:c(n(s).wrapper)},[x(d,{items:S,popper:{placement:"bottom-start"}},{default:T(()=>[x(i,{color:"green",label:"Version "+n(te),"trailing-icon":"i-heroicons-chevron-down-20-solid"},null,8,["label"])]),_:1}),e("div",{class:c(n(s).table.wrapper)},[e("div",{class:c(n(s).table.title)},"Entity Definition",2),e("div",{class:c([n(s).table.content.base,n(s).table.content.padding,n(s).table.content.text])},[(h(!0),g(C,null,L(n(Y),t=>(h(),g("div",{key:t.value},[e("div",null,u(t.columnName+` (Total: ${M().length})`),1),x(d,{items:t.entityType,popper:{placement:"bottom-start"},ui:P},{default:T(()=>[x(i,{color:"white",label:t.label,"trailing-icon":"i-heroicons-chevron-down-20-solid"},null,8,["label"])]),_:2},1032,["items"])]))),128)),(h(!0),g(C,null,L(n(Z),t=>(h(),g("div",{key:t.value},[e("div",fe,u(t.columnName),1),x(r,{label:t.badgeLabel,color:"white",size:"lg"},null,8,["label"])]))),128))],2)],2),e("div",ge,[e("div",{class:c(n(s).table.title)},"Validation Criteria",2),e("div",_e,[e("div",De,[e("div",{class:c(n(s).table.content.title)},"Must Satisfy",2),e("div",ye,u(((p=n(a))==null?void 0:p.mustSatisfy)||"No Data"),1)]),e("div",Ne,[e("div",{class:c(n(s).table.content.title)},"Keyword",2),e("div",{class:c(n(s).table.content.text)},u(((v=n(a))==null?void 0:v.keyword)||"No Data"),3)]),e("div",xe,[e("div",null,[e("div",{class:c(n(s).table.content.title)},"Dependencies",2),e("div",{class:c(n(s).table.content.text),innerHTML:(((b=n(a))==null?void 0:b.dependencies)||"No Data").replace(/,\s*/g,",<br>")},null,10,ke)])])]),(h(!0),g(C,null,L(n(ee),t=>{var _,D,y,N;return h(),g("div",{key:t.value},[e("div",we,u(t.columnName),1),e("div",Ie,[e("div",Fe,[e("div",{class:c(n(s).table.content.title)},u(t.checkFunction),3),e("div",{class:c(n(s).table.content.text)},u(t.value==="requirement"?t.requirements[0].checkFunction:(_=t.requirements[0])==null?void 0:_.checkFunction),3)]),e("div",Me,[e("div",{class:c(n(s).table.content.title)},u(t.description),3),e("div",{class:c([((D=t.requirements[1])==null?void 0:D.description)!=="No description available"?"text-left dark:text-gray-400":n(s).table.content.text])},u(t.value==="requirement"?t.requirements[1].description:(y=t.requirements[1])==null?void 0:y.description),3)]),e("div",Ve,[e("div",{class:c(n(s).table.content.title)},u(t.arguments),3),e("div",Te,u(t.value==="requirement"?t.requirements[2].reqArguments:(N=t.requirements[2])==null?void 0:N.conditionArguments),1)])])])}),128))])],2)]}),_:1})}}});export{Re as default};
